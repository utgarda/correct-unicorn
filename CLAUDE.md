# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

correct-unicorn is a Haskell-based passphrase generator inspired by https://github.com/maandree/correctpony and xkcd 936. It generates random passphrases by selecting words from a system dictionary and displaying them with ANSI color formatting.

## Design Philosophy

- **Hacker aesthetics**: UI should look its best in coolretroterm
- **Traditional Linux terminal UI**: Use terminal-native elements (clipboard integration, pipe-friendly output)
- **Integration with pass**: Should integrate with the pass terminal password manager
- **Configurability**: Should accept settings for dictionaries, randomness source, and pass password manager paths

### Planned Features
- Direct clipboard copying functionality
- Integration with pass (password-store) for storing generated passwords
- Configurable dictionary paths (currently hardcoded to `/usr/share/dict/words`)
- Configurable randomness source
- Configurable path within pass password manager for new passwords

## Build System

This project uses Stack (Haskell build tool) with resolver lts-14.4.

### Common Commands

- Build the project: `stack build`
- Run in development: `stack exec -- correct-unicorn --words 4`
- Run with custom word count: `stack exec -- correct-unicorn -w <count>`

## Code Architecture

The application consists of two modules in the `app/` directory:

### Main.hs
- Entry point with CLI argument parsing using `optparse-applicative`
- `genPassword`: Core logic that reads from hardcoded dictionary path (`/usr/share/dict/words`), generates random indices, and selects words
- `Settings`: Configuration structure containing word count parameter
- Uses `System.Random` for randomization

### PrettyAnsi.hs
- ANSI escape code definitions for terminal colors
- `paintWords`: Cycles through color list to colorize words
- `bold`: Applies bold formatting to output

### Key Design Notes

- Dictionary path is hardcoded to `/usr/share/dict/words` (app/Main.hs:10)
- Color selection uses `cycle` to repeat colors when word count exceeds available colors (app/PrettyAnsi.hs:26)
- Currently uses green and yellow colors; blue and magenta are commented out (app/Main.hs:33-34)
- Project configuration is defined in `package.yaml`; the `.cabal` file is auto-generated by hpack
